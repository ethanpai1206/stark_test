### 問題1
 如果要達成「能夠預測指定的symbol在90天後，是否有成長10%」的目標，會選用的模型及訓練方式，文字提供選用的模型及原因

### 回答
為達成「預測指定 Symbol 在 90 天後是否成長 10%」的目標，我們需結合對金融市場的領域知識、嚴謹的統計驗證，並運用能夠捕捉金融市場複雜動態的深度學習模型。以下將闡述模型的選擇，以及支持這些選擇的論點。

### 模型選擇：長短期記憶網絡 (LSTM)

考量到股價數據具有顯著的**時間序列特性**，包含**動能效應**和**長記憶特性**，**長短期記憶網絡 (LSTM)** 是此任務的理想選擇。

#### 1. 與時間序列數學模型的契合度

時間序列數據的預測本質上是試圖找到過去數據與未來值之間的關聯。LSTM 架構能有效地學習這種序列依賴關係，其基本原理可被視為對通用時間序列模型的複雜化和優化：

下面為時間序列的通式

```
y(t)=f(x(t−1),x(t−2),...,x(t−n);W)+b
```
其中：

- y(t) 代表目標變數，在此為 90 天後股價是否成長 10%。
- x(t−k) 代表歷史時間點 t−k 的各種輸入特徵，例如過去的股價、成交量、技術指標、財務數據等。
- f(⋅;W) 為 LSTM 網絡學習到的複雜非線性函數， W 代表網絡學習到的權重。
- b 為偏置項。

LSTM 透過其門控機制（遺忘門、輸入門、輸出門）能夠動態地決定哪些過去的資訊需要被保留、更新或遺忘，這比傳統時間序列模型（如 ARMA）更能處理金融市場中錯綜複雜且隨時間變化的關聯性。

#### 2. LSTM 架構的優勢

LSTM 之所以能有效處理金融時間序列數據，主要歸功於其獨特的架構設計：

- **雙重記憶機制**：LSTM 包含一個**細胞狀態 (Cell State)**，它允許資訊在長序列中流通，並透過**門控單元 (Gating Units)** 精確控制資訊的注入和輸出。這使得 LSTM 能夠同時捕捉：
  - **短期記憶**：有效捕捉近期市場波動、技術指標（如 RSI、KD）或短期財務變動對股價的影響。
  - **長期記憶**：識別並記住對股價有長期影響的關鍵價格水平、趨勢或基本面變化，這對於預測 90 天後的股價至關重要。
- **非線性特徵學習**：股價的變動受到多種因素的非線性交互影響。LSTM 的循環結構和激活函數使其能夠自動學習數據中的複雜非線性模式，無需人工設定複雜的特徵工程。它能夠同時處理**多維度輸入**，整合股價、成交量、市場情緒、宏觀經濟指標、公司財報數據等多元資訊。



#### 3. 股價的非隨機遊走特性與長記憶性



學術研究已廣泛證實，股價並非完全隨機遊走，而是存在可被捕捉的模式和動態：

- **動量效應 (Momentum Effect)**：Jegadeesh 與 Titman (1993) 的研究發現了顯著的股價動量效應，即過去表現較佳的股票在未來一段時間（3-12 個月）內傾向於繼續表現良好。這表明股價的未來走向與其近期歷史表現存在聯繫，而 LSTM 的短期記憶機制能有效捕捉此類模式。
- **對隨機遊走的偏離**：Lo 與 MacKinlay (1988) 的研究（例如使用變差比檢驗）指出，股價序列並非完全符合隨機遊走假設，存在一定的自相關性。
- **長記憶特性 (Long Memory)**：Baillie (1996) 等研究證明了金融時間序列普遍存在的長記憶特性，即過去的資訊可能對遙遠的未來產生影響。LSTM 的細胞狀態正是為了解決傳統 RNN 在處理長序列時的梯度消失問題，從而有效捕捉這種長記憶特性。



以上就是我選擇LSTM作為測指定symbol在90天後，是否有成長10%的模型原因

### 問題2
在訓練中如何從現有的資料集提取出關鍵影響欄位

### 回答

我首先運用領域知識（Domain Knowledge）或業務邏輯（Business Logic），深入探討哪些因素能真正影響目標變數（Target Variable）。以預測某個交易代碼（Symbol）在未來 90 天的股價為例，我們會著重於挖掘與股價連動性高的業務指標。

例如，**營收(Revenue)**的成長是衡量公司獲利能力的重要指標。若觀察到營收呈現逐年增長趨勢，我們可以合理推論該公司股票在未來有上漲潛力。同樣地，每股盈餘（EPS）成長率的提升，代表每股所創造的獲利增加，這通常能直接推動股價上漲。

透過這些領域知識，我們得以在資料集（Dataset）中進行精準的特徵篩選（Feature Selection）。接著，再運用**統計方法(Statistical Methods)**來驗證這些特徵與股價之間的有效性。常用的統計檢驗方法包括：

- 相關性分析 (Correlation Analysis)：

  - 皮爾遜相關係數 (Pearson Correlation Coefficient)：衡量兩個連續變數之間的線性相關程度。

- 單變量統計檢驗 (Univariate Statistical Tests)：

  - 卡方檢定 (Chi-Squared Test)：用於檢定兩個類別變數之間是否存在關聯性。

  - ANOVA F檢驗 (Analysis of Variance F-test)：用於比較三個或更多組別的平均數是否存在顯著差異。

- 主成分分析 (Principal Component Analysis, PCA)：透過降維技術，找出資料中最重要的幾個變數組合。

- 機器學習方法 (Machine Learning Methods)：

  - 模型內建特徵重要性評分 (Feature Importance Scores)：如 Random Forest、XGBoost 等模型，能直接輸出各特徵對模型預測的貢獻度。

  - Gini重要性 (Gini Importance)：一種衡量特徵在決策樹模型中貢獻度的指標。

透過上述方法，我們可以科學地驗證潛在特徵與股價變動之間的有效關聯性，從而建立更可靠的預測模型。


### 問題3
如何利用目前已有的資料集欄位，推論出更有效的新資料欄位

### 回答

我一樣會以領域知識為基礎，搭配特徵工程組合的方式進而推論更有效的欄位，下面是一些常用的特徵工程組合方法：

- 數學運算

  透過基本的算術運算，我們可以將分散的財務數據整合成更有意義的綜合指標。
  - 加減乘除
    
    ```
    高品質成長分數 = (revenueGrowth + netIncomeGrowth + freeCashFlowGrowth) / 3
    償債能力趨勢 = interestCoverage × cashFlowToDebtRatio
    營運效率改善 = operatingCashFlowGrowth - revenueGrowth
    ```
  
  - 比率計算 
    
    ```
    管理信心指標 = (股票回購 + 配息成長) / 自由現金流成長
    獲利品質指標 = freeCashFlowGrowth / netIncomeGrowth
    價格效率指標 = 股價變化率 / EPS成長率
    ```
- 時間相關

  考慮時間序列的特性，能幫助我們捕捉變化的動態。
  - 時間差

    ```
    季度間變化 = 本季EPS成長率 - 上季EPS成長率
    ```
  - 滾動統計
    
    ```
    滾動獲利品質 = 過去4季平均(freeCashFlow/netIncome)
    移動平均乖離 = (當前價格 - tech5SMA) / tech5SMA
    ```

- 行為序列特徵

  透過分析數據序列的行為模式，可以提取更深層次的資訊。
  - 序列統計
    
    ```
    成長加速度 = 當期成長率 - 前期成長率
    獲利穩定性 = EPS成長率的變異係數
    現金流一致性 = operatingCashFlow與netIncome的相關係數
    ```
透過以上這些經過設計的特徵工程方法，我們能夠從原始數據中挖掘出更豐富、更有洞察力的資訊，為後續的模型預測打下堅實的基礎。